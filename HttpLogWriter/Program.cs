using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Cache;

namespace HttpLogWriter
{
    class Program
    {
        static void Main(string[] args)
        {
            //Automatically write the log  for my work
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://121.40.139.207:81/Login.aspx");
            request.Method = "POST";
            request.KeepAlive = true;

            //   request.CachePolicy = new System.Net.Cache.RequestCachePolicy(RequestCacheLevel.);
            request.ContentType = "application/x-www-form-urlencoded";
            request.UserAgent = "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.117 Safari/537.36";
            request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8";
            //request.CookieContainer = new CookieContainer();
            //request.CookieContainer.Add(new Cookie("userNameCookie", @"%e7%8e%8b%e6%b5%aa%e9%9d%99","/",));
            //request.CookieContainer.Add(new Cookie(".ASPXAUTH", "3DE7D6F15B708FE83076536B570913C7A9E53BFAC7EE908A2CD9CF19855BAB5B428A9205346FB982C001D04040D7FDF282B42FC0549131EC71C4DDFAC6304B7A615B5A7BB16FB144DFC62F28A111CC71D3697F6D76FED13CFF39CAD23292DB7CD0677CD1CB6481E79A95061FE1540CBC27DBCE622C0FDFB8E84990CE2CC4DB2B5C68E9F64B0FE09D823B358D2930E1156F6C8535DC37BE0A68BEED48C0217B5F63AE437821893D5BE76D174F73C47C5C0738282C7032D184D285B142189CEE5A8327E7F77A75BA2832FA7716E0AD991D9C79D5431E85F8CEDECE2AEB9DCD7CAB1156DC794245C48BBCCFDC17AC771363F13248EC7DCC8881F8984525C8B3B36D242EAEBFC417CB9C2A7263D0F0FA589FD244657A1AA6030835B73FD6CF33BE1C3E85CF1185D7FA7C09CA234367AD99E44F48C0564E7F7A16F9E312AC2E78EAD96BBD5065E5D3C227FA4D82E0C6D5FECA192D4D2629AD900D2D02C4A7B4E4837B59274AFB7C72F3549CDCFD83A237F7B7874210BBE1914E5C436DF4721710BC876921CC0D4A894894B8F0619BAAB7C423DF1882EDF98FBED4D0A80080EEF4C2B013DAA746E4BD7EC7304C3C3B1AA84C3FB269C414455E942ABD866D1F4C7A91CA8620725F347F26A743840BB5C79F6CC036BA96D14359663C55A92A93F43A96405746A6F375D71FA7D8588FEF0675FA59DBDD773C6DF3B91622A433701467367295ECADBE3021AA016C260E1E961BC247A0A9945C2B1AECBD85F2A6150877A7E6E375303F9132942D2B64A2102D74DDF85C3187B425605408C6BA05970E228BD342D42072983C8C4D4DB587DC3B90194DEF7DF1490FFE1DA36080E0556CA83DECA18F354F7F99FE975FACDE9B3A3FFB25CA63D7C0520244FEE469A7C716D89D9CF50798154DB133AB3D38EEC1ECF305C770B8AF4C663C81A4E9A2D5A066A31855BC55B1DE753C03F7C343ADB6C6F21B89F5B607AC1DFF4B5472D5A0C0C789BE81364014FD032C58DDC244FCB184F20E09E14733765C99A2A8F3AECF2BA130A37F8B5C65856E15E006EBFBCE3D9CEA57DA284209BDD85F05BD2733097DA0B4BD12444359C96D8253CC6A00356E927A954A04EE9AB5D37C5215E0FFD01CDD6B4BF7544F4EAE3FBEA280A91F85D52AB0873BFC123FE4C33CED4C1297E15A8378CBE395BC9F2F54152063B37BEC5DA6EA5CF6AAC36CFFB8EDB91D50E6304B65DCC752EB17A29B44F7BEF9F04182024CAA90FE5A571C254B6B81EFA426172846550CF199BF6AED7CA7E2AA91B7AC4567D0A276DBF98DB67CD905E81B60D847E1F8E50EBADDCBD264F7105AA619D8AB79DCAAF8FBE7C24FAF1B3824254246A7C2C7D0EB86774DA812CA6993E700EFF0D91667613CBF92926A570E4981BDC83DB503E91D5CC76B5B86106211399E58658413CE2BCBC785AC532BAD18E32EB779D8F3EF3B1471761679E1E5C9C74F27C20F2690321D0D29F4331A59EC1E95AE3D00580A0B265A994FA2D5DFE93164B2F5B75168C5FF76735694E6AB03C763B93D385F2382823A0E6F"));
            //request.CookieContainer.Add(new Cookie("userCodeCookie", "748"));
            //request.CookieContainer.Add(new Cookie("userTypeCookie", "5"));
            //request.CookieContainer.Add(new Cookie("departmentCookie", "%e6%8a%80%e6%9c%af%e6%94%af%e6%8c%81%e4%b8%80%e9%83%a8"));
            //request.CookieContainer.Add(new Cookie("departCodeCookie", "25"));

            String dataString = "__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUJOTIwNjI0NDA5ZGRgp0ldg%2Bx4wSIN3JeqB7ykRYWu9g%3D%3D&__EVENTVALIDATION=%2FwEWBAKvgKLGCwKl1bKzCQK1qbSRCwKC3IeGDPTQoRDIjE%2BSBlni7%2FiquPdUUed0&txtUserName=748&txtPassword=932444208&btnLogin=%B5%C7%C2%BC";
            Byte[] data = UTF8Encoding.UTF8.GetBytes(dataString);
            using (var stream = request.GetRequestStream())
            {
                stream.Write(data, 0, data.Length);

            }
            var response = (HttpWebResponse)request.GetResponse();

            Encoding encoding = Encoding.GetEncoding(response.CharacterSet);
            using (var repsonseStream = response.GetResponseStream())
            {
              
                Byte[] respData = new Byte[response.ContentLength];
                repsonseStream.Read(respData, 0, respData.Length);
                String respStr = encoding.GetString(respData);
                Console.WriteLine(respStr);
                //repsonseStream.Read();
            }


        }

    }
}
